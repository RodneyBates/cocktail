# $Id: Makefile,v 2.6 1992/09/24 13:14:46 grosch rel $
LIB	= $(INSTALLGMD)/lib
BIN	= $(INSTALLGMD)/bin
MC	= mtc

MAKEINCLUDE = .

MLIB	= ../../../reuse/src
FRONT	= ../../../front/src
MOCKALIBS = -d $(FRONT) -d $(MLIB)
MOCKAFLAGS	= -noindex -norange

PLIB	= ParserDrv.mi Parser.md Parser.mi Errors.md Errors.mi \
          Scanner.md Scanner.mi ParserDrv.c Parser.c Parser.h \
          Errors.c Errors.h Scanner.c Scanner.h

MODULASOURCES = ArgCheck.md ArgCheck.mi Automaton.md Automaton.mi \
                Check.md Check.mi Compress.md Compress.mi \
                Continue.md Continue.mi Debug.md Debug.mi \
                Default.md Default.mi Final.md Final.mi Gen.md Gen.mi \
                GenLang.md GenLang.mi Infos.md Infos.mi LR.md LR.mi \
                Lookahead.md Lookahead.mi Reduce.md Reduce.mi lalr.mi

OTHERSOURCES = 
SOURCES = $(MODULASOURCES) $(OTHERSOURCES)


MODULAGENS    =
OTHERGENS    =
GENS    = $(MODULAGENS) $(OTHERGENS)
EXE     = lalr

include $(MAKEINCLUDE)/make.include

#install_modula:	lalr lalr.sh $(LIB)/lalr $(PLIB)
#	if test $(LIB) = $(BIN); then echo error: BIN = LIB; false; else true; fi
#	sed 's;LIB;$(LIB);' < lalr.sh > $(BIN)/lalr
#	chmod a+rx $(BIN)/lalr
#	install -c -s -m 755 lalr $(LIB)/lalr
#	cd ../lib; cp $(PLIB) $(LIB)/lalr
#	cd $(LIB)/lalr; chmod a+r $(PLIB)

# installation directories

$(LIB)/lalr:	$(LIB)
	sh -c "if test ! -d $(LIB)/lalr; then mkdir $(LIB)/lalr; else true; fi"

clean:
	rm -f core *.[dimor] *.def *.mod *.sym ERRORS LISTING _Debug *.bak

.SUFFIXES:	.def .mod .md .mi

.md.def:
	ln $*.md $*.def

.mi.mod:
	ln $*.mi $*.mod

